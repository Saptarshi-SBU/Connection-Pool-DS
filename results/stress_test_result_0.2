CONFIG_CACHEOBJS_CONNPOOL

insmod conntable_ktest.ko nr_nodes=4 nr_conns=4 nr_insert_threads=2 nr_lookup_threads=4 put_delay_ms=4

root@saptarshi-VirtualBox:~/work/linux-kernel# cat /proc/fs/cacheobjs/conntable_test 
HOST	STATE	RETRIES	LOOKUPS	WAITS	AVG_WAIT(us)	AVG_LAT_GET(us)	AVG_LAT_PUT(us)	SEND(kb) RCV(kb)
127.0.0.1:3 ACTIVE 0 5247 0 1 14303 0 0 0
127.0.0.1:3 READY 0 2365 0 1 14129 0 0 0
127.0.0.1:3 READY 0 366 0 0 12918 0 0 0
127.0.0.1:3 READY 0 23 0 0 12347 0 0 0
127.0.0.1:3 READY 0 0 0 0 0 0 0 0
127.0.0.1:3 READY 0 0 0 0 0 0 0 0
127.0.0.1:3 READY 0 0 0 0 0 0 0 0
127.0.0.1:3 READY 0 0 0 0 0 0 0 0
127.0.0.1:1 ACTIVE 0 5279 0 0 14277 0 0 0
127.0.0.1:1 READY 0 2326 0 0 14202 0 0 0
127.0.0.1:1 READY 0 370 0 0 13383 0 0 0
127.0.0.1:1 READY 0 24 0 0 12333 0 0 0
127.0.0.1:1 READY 0 0 0 0 0 0 0 0
127.0.0.1:1 READY 0 0 0 0 0 0 0 0
127.0.0.1:1 READY 0 0 0 0 0 0 0 0
127.0.0.1:1 READY 0 0 0 0 0 0 0 0
127.0.0.1:4 READY 0 5224 0 0 14215 0 0 0
127.0.0.1:4 ACTIVE 0 2382 0 1 13890 0 0 0
127.0.0.1:4 READY 0 373 0 0 12611 0 0 0
127.0.0.1:4 READY 0 23 0 0 12521 0 0 0
127.0.0.1:4 READY 0 0 0 0 0 0 0 0
127.0.0.1:4 READY 0 0 0 0 0 0 0 0
127.0.0.1:4 READY 0 0 0 0 0 0 0 0
127.0.0.1:4 READY 0 0 0 0 0 0 0 0
127.0.0.1:2 ACTIVE 0 5270 0 0 13993 0 0 0
127.0.0.1:2 READY 0 2353 0 3 13589 0 0 0
127.0.0.1:2 READY 0 355 0 0 13036 0 0 0
127.0.0.1:2 READY 0 22 0 0 12363 0 0 0
127.0.0.1:2 READY 0 0 0 0 0 0 0 0
127.0.0.1:2 READY 0 0 0 0 0 0 0 0
127.0.0.1:2 READY 0 0 0 0 0 0 0 0
127.0.0.1:2 READY 0 0 0 0 0 0 0 0

root@saptarshi-VirtualBox:~/work/linux-kernel# cat /proc/fs/cacheobjs/conntable_test HOST	STATE	RETRIES	LOOKUPS	WAITS	AVG_WAIT(us)	AVG_LAT_GET(us)	AVG_LAT_PUT(us)	SEND(kb) RCV(kb)
127.0.0.1:3 ACTIVE 0 7158 0 0 13519 0 0 0
127.0.0.1:3 ACTIVE 0 3798 0 0 13423 0 0 0
127.0.0.1:3 READY 0 1296 0 0 12830 0 0 0
127.0.0.1:3 READY 0 91 0 0 12395 0 0 0
127.0.0.1:3 READY 0 0 0 0 0 0 0 0
127.0.0.1:3 READY 0 0 0 0 0 0 0 0
127.0.0.1:3 READY 0 0 0 0 0 0 0 0
127.0.0.1:3 READY 0 0 0 0 0 0 0 0
127.0.0.1:2 READY 0 7133 0 0 13557 0 0 0
127.0.0.1:2 READY 0 3816 0 0 13558 0 0 0
127.0.0.1:2 READY 0 1293 0 0 13036 0 0 0
127.0.0.1:2 READY 0 99 0 0 12848 0 0 0
127.0.0.1:2 READY 0 0 0 0 0 0 0 0
127.0.0.1:2 READY 0 0 0 0 0 0 0 0
127.0.0.1:2 READY 0 0 0 0 0 0 0 0
127.0.0.1:2 READY 0 0 0 0 0 0 0 0
127.0.0.1:1 ACTIVE 0 7122 0 0 13548 0 0 0
127.0.0.1:1 READY 0 3795 0 0 13534 0 0 0
127.0.0.1:1 READY 0 1326 0 0 13330 0 0 0
127.0.0.1:1 READY 0 98 0 0 13265 0 0 0
127.0.0.1:1 READY 0 0 0 0 0 0 0 0
127.0.0.1:1 READY 0 0 0 0 0 0 0 0
127.0.0.1:1 READY 0 0 0 0 0 0 0 0
127.0.0.1:1 READY 0 0 0 0 0 0 0 0
127.0.0.1:4 ACTIVE 0 7138 0 0 13536 0 0 0
127.0.0.1:4 READY 0 3804 0 0 13830 0 0 0
127.0.0.1:4 READY 0 1299 0 0 13727 0 0 0
127.0.0.1:4 READY 0 103 0 0 12815 0 0 0
127.0.0.1:4 READY 0 0 0 0 0 0 0 0
127.0.0.1:4 READY 0 0 0 0 0 0 0 0
127.0.0.1:4 READY 0 0 0 0 0 0 0 0
127.0.0.1:4 READY 0 0 0 0 0 0 0 0

CONFIG_CACHEOBJS_CONNPOOL

insmod conntable_ktest.ko nr_nodes=4 nr_conns=1 nr_insert_threads=1 nr_lookup_threads=4 put_delay_ms=5

cat /proc/fs/cacheobjs/conntable_test HOST	STATE	RETRIES	LOOKUPS	WAITS	AVG_WAIT(us)	AVG_LAT_GET(us)	AVG_LAT_PUT(us)	SEND(kb) RCV(kb)
127.0.0.1:2 ACTIVE 0 1646 0 7290 18284325 0 0 0
127.0.0.1:4 ACTIVE 0 1648 0 75242 18274271 0 0 0
127.0.0.1:1 ACTIVE 0 1645 0 19452 18283282 0 0 0
127.0.0.1:3 ACTIVE 0 1647 0 17000 18275652 0 0 0

root@saptarshi-VirtualBox:~/work/linux-kernel# cat /proc/fs/cacheobjs/conntable_test HOST	STATE	RETRIES	LOOKUPS	WAITS	AVG_WAIT(us)	AVG_LAT_GET(us)	AVG_LAT_PUT(us)	SEND(kb) RCV(kb)
127.0.0.1:1 ACTIVE 0 2457 218 4884 17592185 0 0 0
127.0.0.1:2 ACTIVE 0 2458 245 11391 17593165 0 0 0
127.0.0.1:3 ACTIVE 0 2459 232 9760 17595770 0 0 0
127.0.0.1:4 ACTIVE 0 2460 239 53658 17595121 0 0 0


